## ğŸ’¾æ•°æ®åº“


  * [å¸¸ç”¨æ•°æ®åº“](#%E5%B8%B8%E7%94%A8%E6%95%B0%E6%8D%AE%E5%BA%93)
  * [å…³é”®å­—](#%E5%85%B3%E9%94%AE%E5%AD%97)
    * [count(1) count(ä¸»é”®) count(\*)](#count1-count%E4%B8%BB%E9%94%AE-count)
  * [åŸºç¡€çŸ¥è¯†](#%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86)
    * [ä¸‰å¤§èŒƒå¼](#%E4%B8%89%E5%A4%A7%E8%8C%83%E5%BC%8F)
    * [äº”å¤§çº¦æŸ](#%E4%BA%94%E5%A4%A7%E7%BA%A6%E6%9D%9F)
  * [äº‹åŠ¡](#%E4%BA%8B%E5%8A%A1)
    * [ä¸è€ƒè™‘éš”ç¦»æ€§çš„å®‰å…¨æ€§é—®é¢˜](#%E4%B8%8D%E8%80%83%E8%99%91%E9%9A%94%E7%A6%BB%E6%80%A7%E7%9A%84%E5%AE%89%E5%85%A8%E6%80%A7%E9%97%AE%E9%A2%98)
    * [4å¤§ç‰¹æ€§ï¼ˆACIDï¼‰](#4%E5%A4%A7%E7%89%B9%E6%80%A7acid)
    * [5ç§äº‹åŠ¡éš”ç¦»çº§åˆ«](#5%E7%A7%8D%E4%BA%8B%E5%8A%A1%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB)
  * [ä¼˜åŒ–](#%E4%BC%98%E5%8C%96)
    * [åˆ‡åˆ†æŠ€å·§](#%E5%88%87%E5%88%86%E6%8A%80%E5%B7%A7)
    * [SQL ä¸€äº›å°æŠ€å·§](#sql-%E4%B8%80%E4%BA%9B%E5%B0%8F%E6%8A%80%E5%B7%A7)


### å¸¸ç”¨æ•°æ®åº“
+ MySQL 
+ Microsoft SQL Server
+ MongoDB 
+ Redis
+ Oracle
+ Microsoft Access

### å…³é”®å­—
#### count(1) count(ä¸»é”®) count(\*)
+ count(1) å’Œ count(ä¸»é”®) è¿™ä¸¤ä¸ªåªæ‰«æä¸»é”®Indexå°±å¯ä»¥å¾—åˆ°æ•°æ®
+ count(\*) æ˜¯æ‰«æè¡¨çš„
+ count(ä¸»é”®)>count(1)= count(\*)
+ count(ROWID) è¿™ä¹Ÿæ˜¯åªæ‰«æIndexçš„ï¼Œæ•ˆç‡é«˜

### åŸºç¡€çŸ¥è¯†
#### ä¸‰å¤§èŒƒå¼
+ ç¬¬ä¸€èŒƒå¼ï¼ˆ1NFï¼‰ï¼š
æ¯ä¸€åˆ—éƒ½æ˜¯ä¸å¯åˆ†å‰²çš„åŸå­æ•°æ®é¡¹ï¼›
+ ç¬¬äºŒèŒƒå¼ï¼š
æ»¡è¶³1NFåï¼Œè¦æ±‚è¡¨ä¸­çš„æ‰€æœ‰åˆ—ï¼Œéƒ½å¿…é¡»ä¾èµ–äºä¸»é”®ï¼Œè€Œä¸èƒ½æœ‰ä»»ä½•ä¸€åˆ—ä¸ä¸»é”®æ²¡æœ‰å…³ç³»ï¼ˆä¸€ä¸ªè¡¨åªæè¿°ä¸€ä»¶äº‹æƒ…ï¼‰ï¼›
+ ç¬¬ä¸‰èŒƒå¼ï¼š
åœ¨2NFåŸºç¡€ä¸Šï¼Œè¡¨ä¸­çš„æ¯ä¸€åˆ—åªèƒ½ä¾èµ–äºä¸»é”®ï¼ˆåœ¨2NFåŸºç¡€ä¸Šæ¶ˆé™¤ä¼ é€’ä¾èµ–ï¼‰ã€‚

#### äº”å¤§çº¦æŸ
+ ä¸»é”®çº¦æŸï¼ˆPrimay Key Coustraintï¼‰ï¼šå”¯ä¸€æ€§ï¼Œéç©ºæ€§ï¼›  
```
alter table stuInfo
add constraint PK_stuNo primary key (stuNo)
```
+ å”¯ä¸€çº¦æŸï¼ˆUnique Counstraintï¼‰ï¼šå”¯ä¸€æ€§ï¼Œå¯ä»¥ç©ºï¼Œä½†åªèƒ½æœ‰ä¸€ä¸ªï¼›  
```
alter table stuInfo
add constraint UQ_stuID unique(stuID)
```
+ æ£€æŸ¥çº¦æŸ (Check Counstraint) ï¼šå¯¹è¯¥åˆ—æ•°æ®çš„èŒƒå›´ã€æ ¼å¼çš„é™åˆ¶ï¼ˆå¦‚ï¼šå¹´é¾„ã€æ€§åˆ«ç­‰ï¼‰ï¼›  
```
alter table stuInfo
add constraint CK_stuAge check (stuAge between 15 and 40)
```
+ é»˜è®¤çº¦æŸ (Default Counstraint) ï¼šè¯¥æ•°æ®çš„é»˜è®¤å€¼ï¼›  
```
alter table stuInfo
add constraint DF_stuAddress default (â€˜åœ°å€ä¸è¯¦â€™) for stuAddress
```
+ å¤–é”®çº¦æŸ (Foreign Key Counstraint) ï¼šéœ€è¦å»ºç«‹ä¸¤è¡¨é—´çš„å…³ç³»å¹¶å¼•ç”¨ä¸»è¡¨çš„åˆ—ã€‚  
```
alter table stuInfo
add constraint FK_stuNo foreign key(stuNo)references stuinfo(stuNo)
```

### äº‹åŠ¡
#### ä¸è€ƒè™‘éš”ç¦»æ€§çš„å®‰å…¨æ€§é—®é¢˜
+ è„è¯»ï¼šä¸€ä¸ªäº‹åŠ¡è¯»åˆ°äº†å¦ä¸€ä¸ªäº‹åŠ¡çš„æœªæäº¤çš„æ•°æ®ï¼›
+ ä¸å¯é‡å¤è¯»ï¼šä¸€ä¸ªäº‹åŠ¡è¯»åˆ°äº†å¦ä¸€ä¸ªäº‹åŠ¡å·²ç»æäº¤çš„ update çš„æ•°æ®å¯¼è‡´å¤šæ¬¡æŸ¥è¯¢ç»“æœä¸ä¸€è‡´ï¼›
+ è™šå¹»è¯»ï¼šä¸€ä¸ªäº‹åŠ¡è¯»åˆ°äº†å¦ä¸€ä¸ªäº‹åŠ¡å·²ç»æäº¤çš„ insert çš„æ•°æ®å¯¼è‡´å¤šæ¬¡æŸ¥è¯¢ç»“æœä¸ä¸€è‡´ã€‚

#### 4å¤§ç‰¹æ€§ï¼ˆACIDï¼‰
+ åŸå­æ€§ï¼ˆAtomicityï¼‰ï¼šä¸€ä¸ªäº‹åŠ¡æ˜¯ä¸€ä¸ªä¸å¯åˆ†å‰²çš„å·¥ä½œå•ä½ï¼Œäº‹åŠ¡ä¸­åŒ…æ‹¬çš„è¯¸æ“ä½œè¦ä¹ˆéƒ½åšï¼Œè¦ä¹ˆéƒ½ä¸åšï¼›
+ ä¸€è‡´æ€§ï¼ˆConsistencyï¼‰ï¼šäº‹åŠ¡å¿…é¡»æ˜¯ä½¿æ•°æ®åº“ä»ä¸€ä¸ªä¸€è‡´æ€§çŠ¶æ€å˜åˆ°å¦ä¸€ä¸ªä¸€è‡´æ€§çŠ¶æ€ã€‚ä¸€è‡´æ€§ä¸åŸå­æ€§æ˜¯å¯†åˆ‡ç›¸å…³çš„ï¼›
+ éš”ç¦»æ€§ï¼ˆIsolationï¼‰ï¼šä¸€ä¸ªäº‹åŠ¡çš„æ‰§è¡Œä¸èƒ½è¢«å…¶ä»–äº‹åŠ¡å¹²æ‰°ï¼›
+ æŒä¹…æ€§ï¼ˆDurabilityï¼‰ï¼šä¸€ä¸ªäº‹åŠ¡ä¸€æ—¦æäº¤ï¼Œå®ƒå¯¹æ•°æ®åº“ä¸­æ•°æ®çš„æ”¹å˜å°±åº”è¯¥æ˜¯æ°¸ä¹…æ€§çš„ï¼Œå³ä¾¿æ˜¯åœ¨æ•°æ®åº“ç³»ç»Ÿé‡åˆ°æ•…éšœçš„æƒ…å†µä¸‹ä¹Ÿä¸ä¼šä¸¢å¤±æäº¤äº‹åŠ¡çš„æ“ä½œã€‚

#### 5ç§äº‹åŠ¡éš”ç¦»çº§åˆ«
+ DEFAULT è¿™æ˜¯ä¸€ä¸ªPlatfromTransactionManageré»˜è®¤çš„éš”ç¦»çº§åˆ«ï¼Œä½¿ç”¨æ•°æ®åº“é»˜è®¤çš„äº‹åŠ¡éš”ç¦»çº§åˆ«ï¼›
+ æœªæäº¤è¯»ï¼ˆread uncommitedï¼‰ï¼šè„è¯»ï¼Œä¸å¯é‡å¤è¯»ï¼Œè™šè¯»éƒ½æœ‰å¯èƒ½å‘ç”Ÿï¼›
+ å·²æäº¤è¯»ï¼ˆread commitedï¼‰ï¼šé¿å…è„è¯»ã€‚ä½†æ˜¯ä¸å¯é‡å¤è¯»å’Œè™šè¯»æœ‰å¯èƒ½å‘ç”Ÿï¼›
+ å¯é‡å¤è¯»ï¼ˆrepeatable readï¼‰ï¼šé¿å…è„è¯»å’Œä¸å¯é‡å¤è¯».ä½†æ˜¯è™šè¯»æœ‰å¯èƒ½å‘ç”Ÿï¼›
+ ä¸²è¡ŒåŒ–çš„ï¼ˆserializableï¼‰ï¼šé¿å…ä»¥ä¸Šæ‰€æœ‰è¯»é—®é¢˜ã€‚  
![éš”ç¦»çº§åˆ«](https://images2015.cnblogs.com/blog/1053956/201703/1053956-20170313102548791-1506111244.png)

### ä¼˜åŒ–
#### åˆ‡åˆ†æŠ€å·§
+ å‚ç›´æ‹†åˆ†ï¼šæŠŠè¡¨æŒ‰æ¨¡å—åˆ’åˆ†åˆ°ä¸åŒæ•°æ®åº“è¡¨ä¸­ã€‚
+ æ°´å¹³æ‹†åˆ†ï¼šæŠŠä¸€ä¸ªè¡¨æŒ‰ç…§æŸç§è§„åˆ™ï¼ˆæ—¶é—´ã€ç”¨æˆ·...ï¼‰æŠŠæ•°æ®åˆ’åˆ†åˆ°ä¸åŒè¡¨æˆ–æ•°æ®åº“é‡Œã€‚

#### SQL ä¸€äº›å°æŠ€å·§
+ æ ¹æ®å·²æœ‰çš„è¡¨åˆ›å»ºæ–°è¡¨
```
create table tab_new like tab_old 
```
```
create table tab_new as select col1,col2â€¦ from tab_old definition only
```
+ å¤åˆ¶è¡¨ï¼ˆåªå¤åˆ¶ç»“æ„ï¼‰
```
select * into tab_new from tab_old where 1<>1ï¼ˆä»…ç”¨äºSQlServerï¼‰
```
```
select top 0 * into tab_new from tab_old
```
+ åˆ é™¤é‡å¤è®°å½•
```
delete from tablename where id not in (select max(id) from tablename group by col1,col2,...)ï¼ˆæ¨èï¼‰
```
```
select distinct * into temp from tablename
delete from tablename
insert into tablename select * from temp
```
+ éšæœºå–å‡º10æ¡æ•°æ®
```
select top 10 * from tablename order by newid()
```



