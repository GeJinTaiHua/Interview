## ğŸ’¾æ•°æ®åº“


  * [å¸¸ç”¨æ•°æ®åº“](#%E5%B8%B8%E7%94%A8%E6%95%B0%E6%8D%AE%E5%BA%93)
    * [Redis](#redis)
  * [å…³é”®å­—](#%E5%85%B3%E9%94%AE%E5%AD%97)
    * [count(1) count(ä¸»é”®) count(\*)](#count1-count%E4%B8%BB%E9%94%AE-count)
    * [Limit](#limit)
  * [åŸºç¡€çŸ¥è¯†](#%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86)
    * [ä¸‰å¤§èŒƒå¼](#%E4%B8%89%E5%A4%A7%E8%8C%83%E5%BC%8F)
    * [äº”å¤§çº¦æŸ](#%E4%BA%94%E5%A4%A7%E7%BA%A6%E6%9D%9F)
  * [äº‹åŠ¡](#%E4%BA%8B%E5%8A%A1)
    * [ä¸è€ƒè™‘éš”ç¦»æ€§çš„å®‰å…¨æ€§é—®é¢˜](#%E4%B8%8D%E8%80%83%E8%99%91%E9%9A%94%E7%A6%BB%E6%80%A7%E7%9A%84%E5%AE%89%E5%85%A8%E6%80%A7%E9%97%AE%E9%A2%98)
    * [4å¤§ç‰¹æ€§ï¼ˆACIDï¼‰](#4%E5%A4%A7%E7%89%B9%E6%80%A7acid)
    * [5ç§äº‹åŠ¡éš”ç¦»çº§åˆ«](#5%E7%A7%8D%E4%BA%8B%E5%8A%A1%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB)
  * [ä¼˜åŒ–](#%E4%BC%98%E5%8C%96)
    * [åˆ‡åˆ†æŠ€å·§](#%E5%88%87%E5%88%86%E6%8A%80%E5%B7%A7)
    * [SQL ä¸€äº›å°æŠ€å·§](#sql-%E4%B8%80%E4%BA%9B%E5%B0%8F%E6%8A%80%E5%B7%A7)
    * [ç´¢å¼•](#%E7%B4%A2%E5%BC%95)
  * [ç¼“å­˜](#%E7%BC%93%E5%AD%98)


### å¸¸ç”¨æ•°æ®åº“
+ MySQL 
+ Microsoft SQL Server
+ MongoDB 
+ Redis
+ Oracle
+ Microsoft Access

#### Redis
åŸºäºå†…å­˜çš„é‡‡ç”¨çš„ã€å•è¿›ç¨‹å•çº¿ç¨‹ã€‘æ¨¡å‹çš„KVæ•°æ®åº“ï¼Œç”±Cè¯­è¨€ç¼–å†™ã€‚
+ ä¸ºä»€ä¹ˆå¿«
  + å®Œå…¨åŸºäºå†…å­˜ï¼›
  + æ•°æ®ç»“æ„ç®€å•ï¼Œå¯¹æ•°æ®æ“ä½œä¹Ÿç®€å•ï¼›
  + é‡‡ç”¨å•çº¿ç¨‹ï¼›
  + ä½¿ç”¨å¤šè·¯ I/O å¤ç”¨æ¨¡å‹ï¼Œéé˜»å¡IOï¼›
  + åº•å±‚æ¨¡å‹ï¼šRedisç›´æ¥è‡ªå·±æ„å»ºäº†VM æœºåˆ¶ï¼›
+ æ•°æ®ç»“æ„
  + String
  + Hash
  + List
  + Set
  + Zset

### å…³é”®å­—
#### count(1) count(ä¸»é”®) count(\*)
+ count(1) å’Œ count(ä¸»é”®) è¿™ä¸¤ä¸ªåªæ‰«æä¸»é”®Indexå°±å¯ä»¥å¾—åˆ°æ•°æ®
+ count(\*) æ˜¯æ‰«æè¡¨çš„
+ count(ä¸»é”®)>count(1)= count(\*)
+ count(ROWID) è¿™ä¹Ÿæ˜¯åªæ‰«æIndexçš„ï¼Œæ•ˆç‡é«˜

#### Limit 
+ LIMIT N,Mï¼šLIMITé¦–å…ˆè¦æ‰¾æŸ¥ N+M è¡Œï¼Œç„¶åä»Nè¡Œå¤„ï¼Œå–Mè¡Œã€‚
+ ä¼˜åŒ–ï¼šè®©Nå˜çš„å°½å¯èƒ½çš„å°æˆ–æ˜¯ä¸ç”¨
```
åŸæŸ¥è¯¢ï¼šSELECT * FROM pw_gbook WHERE uid='48' ORDER BY postdate DESC LIMIT 1275480,20;
è½¬æ¢æˆï¼šSELECT * FROM pw_gbook WHERE id>1275480 and uid='48' ORDER BY postdate DESC LIMIT 20;
```

### åŸºç¡€çŸ¥è¯†
#### ä¸‰å¤§èŒƒå¼
+ ç¬¬ä¸€èŒƒå¼ï¼ˆ1NFï¼‰ï¼š
æ¯ä¸€åˆ—éƒ½æ˜¯ä¸å¯åˆ†å‰²çš„åŸå­æ•°æ®é¡¹ï¼›
+ ç¬¬äºŒèŒƒå¼ï¼š
æ»¡è¶³1NFåï¼Œè¦æ±‚è¡¨ä¸­çš„æ‰€æœ‰åˆ—ï¼Œéƒ½å¿…é¡»ä¾èµ–äºä¸»é”®ï¼Œè€Œä¸èƒ½æœ‰ä»»ä½•ä¸€åˆ—ä¸ä¸»é”®æ²¡æœ‰å…³ç³»ï¼ˆä¸€ä¸ªè¡¨åªæè¿°ä¸€ä»¶äº‹æƒ…ï¼‰ï¼›
+ ç¬¬ä¸‰èŒƒå¼ï¼š
åœ¨2NFåŸºç¡€ä¸Šï¼Œè¡¨ä¸­çš„æ¯ä¸€åˆ—åªèƒ½ä¾èµ–äºä¸»é”®ï¼ˆåœ¨2NFåŸºç¡€ä¸Šæ¶ˆé™¤ä¼ é€’ä¾èµ–ï¼‰ã€‚

#### äº”å¤§çº¦æŸ
+ ä¸»é”®çº¦æŸï¼ˆPrimay Key Coustraintï¼‰ï¼šå”¯ä¸€æ€§ï¼Œéç©ºæ€§ï¼›  
```
alter table stuInfo
add constraint PK_stuNo primary key (stuNo)
```
+ å”¯ä¸€çº¦æŸï¼ˆUnique Counstraintï¼‰ï¼šå”¯ä¸€æ€§ï¼Œå¯ä»¥ç©ºï¼Œä½†åªèƒ½æœ‰ä¸€ä¸ªï¼›  
```
alter table stuInfo
add constraint UQ_stuID unique(stuID)
```
+ æ£€æŸ¥çº¦æŸ (Check Counstraint) ï¼šå¯¹è¯¥åˆ—æ•°æ®çš„èŒƒå›´ã€æ ¼å¼çš„é™åˆ¶ï¼ˆå¦‚ï¼šå¹´é¾„ã€æ€§åˆ«ç­‰ï¼‰ï¼›  
```
alter table stuInfo
add constraint CK_stuAge check (stuAge between 15 and 40)
```
+ é»˜è®¤çº¦æŸ (Default Counstraint) ï¼šè¯¥æ•°æ®çš„é»˜è®¤å€¼ï¼›  
```
alter table stuInfo
add constraint DF_stuAddress default (â€˜åœ°å€ä¸è¯¦â€™) for stuAddress
```
+ å¤–é”®çº¦æŸ (Foreign Key Counstraint) ï¼šéœ€è¦å»ºç«‹ä¸¤è¡¨é—´çš„å…³ç³»å¹¶å¼•ç”¨ä¸»è¡¨çš„åˆ—ã€‚  
```
alter table stuInfo
add constraint FK_stuNo foreign key(stuNo)references stuinfo(stuNo)
```

### äº‹åŠ¡
#### ä¸è€ƒè™‘éš”ç¦»æ€§çš„å®‰å…¨æ€§é—®é¢˜
+ è„è¯»ï¼šä¸€ä¸ªäº‹åŠ¡è¯»åˆ°äº†å¦ä¸€ä¸ªäº‹åŠ¡çš„æœªæäº¤çš„æ•°æ®ï¼›
+ ä¸å¯é‡å¤è¯»ï¼šä¸€ä¸ªäº‹åŠ¡è¯»åˆ°äº†å¦ä¸€ä¸ªäº‹åŠ¡å·²ç»æäº¤çš„ update çš„æ•°æ®å¯¼è‡´å¤šæ¬¡æŸ¥è¯¢ç»“æœä¸ä¸€è‡´ï¼›
+ è™šå¹»è¯»ï¼šä¸€ä¸ªäº‹åŠ¡è¯»åˆ°äº†å¦ä¸€ä¸ªäº‹åŠ¡å·²ç»æäº¤çš„ insert çš„æ•°æ®å¯¼è‡´å¤šæ¬¡æŸ¥è¯¢ç»“æœä¸ä¸€è‡´ã€‚

#### 4å¤§ç‰¹æ€§ï¼ˆACIDï¼‰
+ åŸå­æ€§ï¼ˆAtomicityï¼‰ï¼šä¸€ä¸ªäº‹åŠ¡æ˜¯ä¸€ä¸ªä¸å¯åˆ†å‰²çš„å·¥ä½œå•ä½ï¼Œäº‹åŠ¡ä¸­çš„æ‰€æœ‰æ“ä½œï¼Œè¦ä¹ˆå…¨éƒ¨å®Œæˆï¼Œè¦ä¹ˆå…¨éƒ¨ä¸å®Œæˆï¼›
+ ä¸€è‡´æ€§ï¼ˆConsistencyï¼‰ï¼šå¯¹æ•°æ®å®Œæ•´æ€§çº¦æŸçš„éµå¾ªï¼›
+ éš”ç¦»æ€§ï¼ˆIsolationï¼‰ï¼šä¸€ä¸ªäº‹åŠ¡çš„æ‰§è¡Œä¸èƒ½è¢«å…¶ä»–äº‹åŠ¡å¹²æ‰°ï¼›
+ æŒä¹…æ€§ï¼ˆDurabilityï¼‰ï¼šä¸€ä¸ªäº‹åŠ¡ä¸€æ—¦æäº¤ï¼Œå®ƒå¯¹æ•°æ®åº“ä¸­æ•°æ®çš„æ”¹å˜å°±åº”è¯¥æ˜¯æ°¸ä¹…æ€§çš„ï¼Œå³ä¾¿æ˜¯åœ¨æ•°æ®åº“ç³»ç»Ÿé‡åˆ°æ•…éšœçš„æƒ…å†µä¸‹ä¹Ÿä¸ä¼šä¸¢å¤±æäº¤äº‹åŠ¡çš„æ“ä½œã€‚

#### 5ç§äº‹åŠ¡éš”ç¦»çº§åˆ«
+ DEFAULT è¿™æ˜¯ä¸€ä¸ªPlatfromTransactionManageré»˜è®¤çš„éš”ç¦»çº§åˆ«ï¼Œä½¿ç”¨æ•°æ®åº“é»˜è®¤çš„äº‹åŠ¡éš”ç¦»çº§åˆ«ï¼›
  + MySQLé»˜è®¤ï¼šå¯é‡å¤è¯»
  + Oracleé»˜è®¤ï¼šå·²æäº¤è¯»
  + SQL Serveré»˜è®¤ï¼šå·²æäº¤è¯»
+ æœªæäº¤è¯»ï¼ˆread uncommitedï¼‰ï¼šè„è¯»ï¼Œä¸å¯é‡å¤è¯»ï¼Œè™šè¯»éƒ½æœ‰å¯èƒ½å‘ç”Ÿï¼›
+ å·²æäº¤è¯»ï¼ˆread commitedï¼‰ï¼šé¿å…è„è¯»ã€‚ä½†æ˜¯ä¸å¯é‡å¤è¯»å’Œè™šè¯»æœ‰å¯èƒ½å‘ç”Ÿï¼›
+ å¯é‡å¤è¯»ï¼ˆrepeatable readï¼‰ï¼šé¿å…è„è¯»å’Œä¸å¯é‡å¤è¯».ä½†æ˜¯è™šè¯»æœ‰å¯èƒ½å‘ç”Ÿï¼›
+ ä¸²è¡ŒåŒ–çš„ï¼ˆserializableï¼‰ï¼šé¿å…ä»¥ä¸Šæ‰€æœ‰è¯»é—®é¢˜ã€‚  
![éš”ç¦»çº§åˆ«](https://images2015.cnblogs.com/blog/1053956/201703/1053956-20170313102548791-1506111244.png)

### ä¼˜åŒ–
#### åˆ‡åˆ†æŠ€å·§
+ å‚ç›´æ‹†åˆ†ï¼šæŠŠè¡¨æŒ‰æ¨¡å—åˆ’åˆ†åˆ°ä¸åŒæ•°æ®åº“è¡¨ä¸­ã€‚
+ æ°´å¹³æ‹†åˆ†ï¼šæŠŠä¸€ä¸ªè¡¨æŒ‰ç…§æŸç§è§„åˆ™ï¼ˆæ—¶é—´ã€ç”¨æˆ·...ï¼‰æŠŠæ•°æ®åˆ’åˆ†åˆ°ä¸åŒè¡¨æˆ–æ•°æ®åº“é‡Œã€‚

#### SQL ä¸€äº›å°æŠ€å·§
+ æ ¹æ®å·²æœ‰çš„è¡¨åˆ›å»ºæ–°è¡¨
```
create table tab_new like tab_old 
```
```
create table tab_new as select col1,col2â€¦ from tab_old definition only
```
+ å¤åˆ¶è¡¨ï¼ˆåªå¤åˆ¶ç»“æ„ï¼‰
```
select * into tab_new from tab_old where 1<>1ï¼ˆä»…ç”¨äºSQlServerï¼‰
```
```
select top 0 * into tab_new from tab_old
```
+ åˆ é™¤é‡å¤è®°å½•
```
delete from tablename where id not in (select max(id) from tablename group by col1,col2,...)ï¼ˆæ¨èï¼‰
```
```
select distinct * into temp from tablename
delete from tablename
insert into tablename select * from temp
```
+ éšæœºå–å‡º10æ¡æ•°æ®
```
select top 10 * from tablename order by newid()
```
+ åˆ†ç»„æŸ¥è¯¢æ¯ç»„å‰ä¸‰
```
select t3.id,t3.country,t3.score 
from (select t1.*, (select count(*) 
                    from tb_score t2 
                    where t1.score<=t2.score and t1.country=t2.country) as rownum 
      from tb_score t1) t3 
where rownum <=3 order by country,score DESC;
```
```
select a.id,a.country,a.name,a.score 
from tb_score a 
where exists 
      (select count(*) 
       from tb_score 
       where country = a.country and score > a.score having Count(*) < 3)
order by a.country,score DESC;
```
```
 select a.id,a.country,a.name,a.score 
 from tb_score a 
 where 
      (select count(*) 
       from tb_score 
       where country = a.country and score > a.score )<3
 order by a.country,score DESC;
```

#### ç´¢å¼•
+ ä½¿ç”¨æ—¶æœº
  + ç»å¸¸å‡ºç°åœ¨ group by,order by å’Œ distinc å…³é”®å­—åé¢çš„å­—æ®µï¼›
  + ç»å¸¸ä¸å…¶ä»–è¡¨è¿›è¡Œè¿æ¥çš„è¡¨ï¼Œåœ¨è¿æ¥å­—æ®µä¸Šåº”è¯¥å»ºç«‹ç´¢å¼•ï¼›
  + ç»å¸¸å‡ºç°åœ¨ Where å­å¥ä¸­çš„å­—æ®µï¼›
  + ç»å¸¸å‡ºç°ç”¨ä½œæŸ¥è¯¢é€‰æ‹©çš„å­—æ®µã€‚
  
### ç¼“å­˜
+ ç¼“å­˜ç©¿é€
  + æŸ¥è¯¢ä¸€ä¸ªä¸€å®šä¸å­˜åœ¨çš„æ•°æ®ï¼Œç”±äºç¼“å­˜æ˜¯ä¸å‘½ä¸­æ—¶éœ€è¦ä»æ•°æ®åº“æŸ¥è¯¢ï¼ŒæŸ¥ä¸åˆ°æ•°æ®åˆ™ä¸å†™å…¥ç¼“å­˜ï¼Œè¿™å°†å¯¼è‡´è¿™ä¸ªä¸å­˜åœ¨çš„æ•°æ®æ¯æ¬¡è¯·æ±‚éƒ½è¦åˆ°æ•°æ®åº“å»æŸ¥è¯¢ï¼›
  + è§£å†³åŠæ³•ï¼š
    1) å¸ƒéš†è¿‡æ»¤å™¨ï¼Œå¯¹æ‰€æœ‰å¯èƒ½æŸ¥è¯¢çš„å‚æ•°ä»¥hashå½¢å¼å­˜å‚¨ï¼Œåœ¨æ§åˆ¶å±‚å…ˆè¿›è¡Œæ ¡éªŒï¼Œä¸ç¬¦åˆåˆ™ä¸¢å¼ƒï¼›
    2) å¦‚æœä¸€ä¸ªæŸ¥è¯¢è¿”å›çš„æ•°æ®ä¸ºç©ºï¼Œæˆ‘ä»¬ä»ç„¶æŠŠè¿™ä¸ªç©ºç»“æœè¿›è¡Œç¼“å­˜ï¼Œä½†å®ƒçš„è¿‡æœŸæ—¶é—´ä¼šå¾ˆçŸ­ï¼Œæœ€é•¿ä¸è¶…è¿‡äº”åˆ†é’Ÿã€‚
+ ç¼“å­˜é›ªå´©
  + å¦‚æœç¼“å­˜é›†ä¸­åœ¨ä¸€æ®µæ—¶é—´å†…å¤±æ•ˆï¼Œå‘ç”Ÿå¤§é‡çš„ç¼“å­˜ç©¿é€ï¼Œæ‰€æœ‰çš„æŸ¥è¯¢éƒ½è½åœ¨æ•°æ®åº“ä¸Šï¼Œé€ æˆäº†ç¼“å­˜é›ªå´©;
  + è§£å†³æ–¹æ³•ï¼š
    1) åœ¨ç¼“å­˜å¤±æ•ˆåï¼Œé€šè¿‡åŠ é”æˆ–è€…é˜Ÿåˆ—æ¥æ§åˆ¶è¯»æ•°æ®åº“å†™ç¼“å­˜çš„çº¿ç¨‹æ•°é‡ï¼›
    2) é€šè¿‡ç¼“å­˜reloadæœºåˆ¶ï¼Œé¢„å…ˆå»æ›´æ–°ç¼“å­˜ï¼Œåœ¨å³å°†å‘ç”Ÿå¤§å¹¶å‘è®¿é—®å‰æ‰‹åŠ¨è§¦å‘åŠ è½½ç¼“å­˜ï¼›
    3) ä¸åŒçš„keyï¼Œè®¾ç½®ä¸åŒçš„è¿‡æœŸæ—¶é—´ï¼Œè®©ç¼“å­˜å¤±æ•ˆçš„æ—¶é—´ç‚¹å°½é‡å‡åŒ€ï¼›
    4) åšäºŒçº§ç¼“å­˜ï¼Œæˆ–è€…åŒç¼“å­˜ç­–ç•¥ã€‚


